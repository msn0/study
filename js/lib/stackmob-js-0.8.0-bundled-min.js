/*
 StackMob JS SDK Version 0.8.0 
 Copyright 2012 StackMob Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

// JSON
// 2011-02-23
// Public Domain.
// http://www.JSON.org/json2.js

// Underscore.js 1.4.1
// http://underscorejs.org
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore may be freely distributed under the MIT license.

// Backbone.js 0.9.2
// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org

var JSON;JSON||(JSON={});
(function(){function d(a){return 10>a?"0"+a:a}function j(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=p[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,c){var d,p,n,u,y=g,w,r=c[b];r&&("object"===typeof r&&"function"===typeof r.toJSON)&&(r=r.toJSON(b));"function"===typeof l&&(r=l.call(c,b,r));switch(typeof r){case "string":return j(r);case "number":return isFinite(r)?String(r):"null";case "boolean":case "null":return String(r);case "object":if(!r)return"null";
g+=h;w=[];if("[object Array]"===Object.prototype.toString.apply(r)){u=r.length;for(d=0;d<u;d+=1)w[d]=a(d,r)||"null";n=0===w.length?"[]":g?"[\n"+g+w.join(",\n"+g)+"\n"+y+"]":"["+w.join(",")+"]";g=y;return n}if(l&&"object"===typeof l){u=l.length;for(d=0;d<u;d+=1)"string"===typeof l[d]&&(p=l[d],(n=a(p,r))&&w.push(j(p)+(g?": ":":")+n))}else for(p in r)Object.prototype.hasOwnProperty.call(r,p)&&(n=a(p,r))&&w.push(j(p)+(g?": ":":")+n);n=0===w.length?"{}":g?"{\n"+g+w.join(",\n"+g)+"\n"+y+"}":"{"+w.join(",")+
"}";g=y;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+d(this.getUTCMonth()+1)+"-"+d(this.getUTCDate())+"T"+d(this.getUTCHours())+":"+d(this.getUTCMinutes())+":"+d(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,h,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var p;h=g="";if("number"===typeof d)for(p=0;p<d;p+=1)h+=" ";else"string"===typeof d&&(h=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,c){function g(a,b){var d,h,i=a[b];if(i&&"object"===typeof i)for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(h=g(i,d),void 0!==h?i[d]=h:delete i[d]);return c.call(a,b,i)}var d,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof c?g({"":d},""):d;throw new SyntaxError("JSON.parse");})})();(function(){var d=this,j=d._,a={},b=Array.prototype,c=Object.prototype,g=b.push,h=b.slice,p=b.concat,l=c.toString,i=c.hasOwnProperty,s=b.forEach,q=b.map,v=b.reduce,n=b.reduceRight,u=b.filter,y=b.every,w=b.some,r=b.indexOf,C=b.lastIndexOf,c=Array.isArray,E=Object.keys,A=Function.prototype.bind,e=function(m){if(m instanceof e)return m;if(!(this instanceof e))return new e(m);this._wrapped=m};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports._=
e):d._=e;e.VERSION="1.4.1";var t=e.each=e.forEach=function(m,f,b){if(s&&m.forEach===s)m.forEach(f,b);else if(m.length===+m.length)for(var c=0,k=m.length;c<k&&f.call(b,m[c],c,m)!==a;c++);else for(c in m)if(e.has(m,c)&&f.call(b,m[c],c,m)===a)break};e.map=e.collect=function(m,a,f){var b=[];return q&&m.map===q?m.map(a,f):(t(m,function(m,c,k){b[b.length]=a.call(f,m,c,k)}),b)};e.reduce=e.foldl=e.inject=function(m,a,f,b){var c=2<arguments.length;if(v&&m.reduce===v)return b&&(a=e.bind(a,b)),c?m.reduce(a,
f):m.reduce(a);t(m,function(m,k,e){c?f=a.call(b,f,m,k,e):(f=m,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return f};e.reduceRight=e.foldr=function(m,a,f,b){var c=2<arguments.length;if(n&&m.reduceRight===n)return b&&(a=e.bind(a,b)),2<arguments.length?m.reduceRight(a,f):m.reduceRight(a);var k=m.length;if(k!==+k)var g=e.keys(m),k=g.length;t(m,function(e,d,x){d=g?g[--k]:--k;c?f=a.call(b,f,m[d],d,x):(f=m[d],c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");
return f};e.find=e.detect=function(a,f,b){var c;return z(a,function(a,m,k){if(f.call(b,a,m,k))return c=a,!0}),c};e.filter=e.select=function(a,f,b){var c=[];return u&&a.filter===u?a.filter(f,b):(t(a,function(a,m,k){f.call(b,a,m,k)&&(c[c.length]=a)}),c)};e.reject=function(a,f,b){var c=[];return t(a,function(a,m,k){f.call(b,a,m,k)||(c[c.length]=a)}),c};e.every=e.all=function(f,b,c){b||(b=e.identity);var k=!0;return y&&f.every===y?f.every(b,c):(t(f,function(f,m,e){if(!(k=k&&b.call(c,f,m,e)))return a}),
!!k)};var z=e.some=e.any=function(f,b,c){b||(b=e.identity);var k=!1;return w&&f.some===w?f.some(b,c):(t(f,function(f,m,e){if(k||(k=b.call(c,f,m,e)))return a}),!!k)};e.contains=e.include=function(a,f){var b=!1;return r&&a.indexOf===r?-1!=a.indexOf(f):(b=z(a,function(a){return a===f}),b)};e.invoke=function(a,f){var b=h.call(arguments,2);return e.map(a,function(a){return(e.isFunction(f)?f:a[f]).apply(a,b)})};e.pluck=function(a,f){return e.map(a,function(a){return a[f]})};e.where=function(a,f){return e.isEmpty(f)?
[]:e.filter(a,function(a){for(var m in f)if(f[m]!==a[m])return!1;return!0})};e.max=function(a,f,b){if(!f&&e.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!f&&e.isEmpty(a))return-Infinity;var c={computed:-Infinity};return t(a,function(a,m,k){m=f?f.call(b,a,m,k):a;m>=c.computed&&(c={value:a,computed:m})}),c.value};e.min=function(a,f,b){if(!f&&e.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!f&&e.isEmpty(a))return Infinity;var c={computed:Infinity};
return t(a,function(a,m,k){m=f?f.call(b,a,m,k):a;m<c.computed&&(c={value:a,computed:m})}),c.value};e.shuffle=function(a){var f,b=0,c=[];return t(a,function(a){f=e.random(b++);c[b-1]=c[f];c[f]=a}),c};var B=function(a){return e.isFunction(a)?a:function(f){return f[a]}};e.sortBy=function(a,f,b){var c=B(f);return e.pluck(e.map(a,function(a,f,m){return{value:a,index:f,criteria:c.call(b,a,f,m)}}).sort(function(a,f){var m=a.criteria,b=f.criteria;if(m!==b){if(m>b||void 0===m)return 1;if(m<b||void 0===b)return-1}return a.index<
f.index?-1:1}),"value")};var f=function(a,f,b,c){var k={},e=B(f);return t(a,function(f,g){var d=e.call(b,f,g,a);c(k,d,f)}),k};e.groupBy=function(a,b,c){return f(a,b,c,function(a,f,m){(e.has(a,f)?a[f]:a[f]=[]).push(m)})};e.countBy=function(a,b,c){return f(a,b,c,function(a,f){e.has(a,f)||(a[f]=0);a[f]++})};e.sortedIndex=function(a,f,b,c){for(var b=null==b?e.identity:B(b),f=b.call(c,f),k=0,g=a.length;k<g;){var d=k+g>>>1;b.call(c,a[d])<f?k=d+1:g=d}return k};e.toArray=function(a){return a?a.length===+a.length?
h.call(a):e.values(a):[]};e.size=function(a){return a.length===+a.length?a.length:e.keys(a).length};e.first=e.head=e.take=function(a,f,b){return null!=f&&!b?h.call(a,0,f):a[0]};e.initial=function(a,f,b){return h.call(a,0,a.length-(null==f||b?1:f))};e.last=function(a,f,b){return null!=f&&!b?h.call(a,Math.max(a.length-f,0)):a[a.length-1]};e.rest=e.tail=e.drop=function(a,f,b){return h.call(a,null==f||b?1:f)};e.compact=function(a){return e.filter(a,function(a){return!!a})};var k=function(a,f,b){return t(a,
function(a){e.isArray(a)?f?g.apply(b,a):k(a,f,b):b.push(a)}),b};e.flatten=function(a,f){return k(a,f,[])};e.without=function(a){return e.difference(a,h.call(arguments,1))};e.uniq=e.unique=function(a,f,b,c){var b=b?e.map(a,b,c):a,k=[],g=[];return t(b,function(b,c){if(f?!c||g[g.length-1]!==b:!e.contains(g,b))g.push(b),k.push(a[c])}),k};e.union=function(){return e.uniq(p.apply(b,arguments))};e.intersection=function(a){var f=h.call(arguments,1);return e.filter(e.uniq(a),function(a){return e.every(f,function(f){return 0<=
e.indexOf(f,a)})})};e.difference=function(a){var f=p.apply(b,h.call(arguments,1));return e.filter(a,function(a){return!e.contains(f,a)})};e.zip=function(){for(var a=h.call(arguments),f=e.max(e.pluck(a,"length")),b=Array(f),c=0;c<f;c++)b[c]=e.pluck(a,""+c);return b};e.object=function(a,f){for(var b={},c=0,k=a.length;c<k;c++)f?b[a[c]]=f[c]:b[a[c][0]]=a[c][1];return b};e.indexOf=function(a,f,b){var c=0,k=a.length;if(b){if("number"!=typeof b)return c=e.sortedIndex(a,f),a[c]===f?c:-1;c=0>b?Math.max(0,
k+b):b}if(r&&a.indexOf===r)return a.indexOf(f,b);for(;c<k;c++)if(a[c]===f)return c;return-1};e.lastIndexOf=function(a,f,b){var c=null!=b;if(C&&a.lastIndexOf===C)return c?a.lastIndexOf(f,b):a.lastIndexOf(f);for(b=c?b:a.length;b--;)if(a[b]===f)return b;return-1};e.range=function(a,f,b){1>=arguments.length&&(f=a||0,a=0);for(var b=arguments[2]||1,c=Math.max(Math.ceil((f-a)/b),0),k=0,e=Array(c);k<c;)e[k++]=a,a+=b;return e};var x=function(){};e.bind=function(a,f){var b,c;if(a.bind===A&&A)return A.apply(a,
h.call(arguments,1));if(!e.isFunction(a))throw new TypeError;return c=h.call(arguments,2),b=function(){if(this instanceof b){x.prototype=a.prototype;var k=new x,e=a.apply(k,c.concat(h.call(arguments)));return Object(e)===e?e:k}return a.apply(f,c.concat(h.call(arguments)))}};e.bindAll=function(a){var f=h.call(arguments,1);return 0==f.length&&(f=e.functions(a)),t(f,function(f){a[f]=e.bind(a[f],a)}),a};e.memoize=function(a,f){var b={};return f||(f=e.identity),function(){var c=f.apply(this,arguments);
return e.has(b,c)?b[c]:b[c]=a.apply(this,arguments)}};e.delay=function(a,f){var b=h.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},f)};e.defer=function(a){return e.delay.apply(e,[a,1].concat(h.call(arguments,1)))};e.throttle=function(a,f){var b,c,k,g,d,x,h=e.debounce(function(){d=g=!1},f);return function(){b=this;c=arguments;return k||(k=setTimeout(function(){k=null;d&&(x=a.apply(b,c));h()},f)),g?d=!0:(g=!0,x=a.apply(b,c)),h(),x}};e.debounce=function(a,f,b){var c,k;return function(){var e=
this,g=arguments,d=b&&!c;return clearTimeout(c),c=setTimeout(function(){c=null;b||(k=a.apply(e,g))},f),d&&(k=a.apply(e,g)),k}};e.once=function(a){var f=!1,b;return function(){return f?b:(f=!0,b=a.apply(this,arguments),a=null,b)}};e.wrap=function(a,f){return function(){var b=[a];return g.apply(b,arguments),f.apply(this,b)}};e.compose=function(){var a=arguments;return function(){for(var f=arguments,b=a.length-1;0<=b;b--)f=[a[b].apply(this,f)];return f[0]}};e.after=function(a,f){return 0>=a?f():function(){if(1>
--a)return f.apply(this,arguments)}};e.keys=E||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var f=[],b;for(b in a)e.has(a,b)&&(f[f.length]=b);return f};e.values=function(a){var f=[],b;for(b in a)e.has(a,b)&&f.push(a[b]);return f};e.pairs=function(a){var f=[],b;for(b in a)e.has(a,b)&&f.push([b,a[b]]);return f};e.invert=function(a){var f={},b;for(b in a)e.has(a,b)&&(f[a[b]]=b);return f};e.functions=e.methods=function(a){var f=[],b;for(b in a)e.isFunction(a[b])&&f.push(b);return f.sort()};
e.extend=function(a){return t(h.call(arguments,1),function(f){for(var b in f)a[b]=f[b]}),a};e.pick=function(a){var f={},c=p.apply(b,h.call(arguments,1));return t(c,function(b){b in a&&(f[b]=a[b])}),f};e.omit=function(a){var f={},c=p.apply(b,h.call(arguments,1)),k;for(k in a)e.contains(c,k)||(f[k]=a[k]);return f};e.defaults=function(a){return t(h.call(arguments,1),function(f){for(var b in f)null==a[b]&&(a[b]=f[b])}),a};e.clone=function(a){return e.isObject(a)?e.isArray(a)?a.slice():e.extend({},a):
a};e.tap=function(a,f){return f(a),a};var F=function(a,f,b,c){if(a===f)return 0!==a||1/a==1/f;if(null==a||null==f)return a===f;a instanceof e&&(a=a._wrapped);f instanceof e&&(f=f._wrapped);var k=l.call(a);if(k!=l.call(f))return!1;switch(k){case "[object String]":return a==String(f);case "[object Number]":return a!=+a?f!=+f:0==a?1/a==1/f:a==+f;case "[object Date]":case "[object Boolean]":return+a==+f;case "[object RegExp]":return a.source==f.source&&a.global==f.global&&a.multiline==f.multiline&&a.ignoreCase==
f.ignoreCase}if("object"!=typeof a||"object"!=typeof f)return!1;for(var g=b.length;g--;)if(b[g]==a)return c[g]==f;b.push(a);c.push(f);var g=0,d=!0;if("[object Array]"==k){if(g=a.length,d=g==f.length)for(;g--&&(d=F(a[g],f[g],b,c)););}else{var k=a.constructor,x=f.constructor;if(k!==x&&(!e.isFunction(k)||!(k instanceof k&&e.isFunction(x)&&x instanceof x)))return!1;for(var h in a)if(e.has(a,h)&&(g++,!(d=e.has(f,h)&&F(a[h],f[h],b,c))))break;if(d){for(h in f)if(e.has(f,h)&&!g--)break;d=!g}}return b.pop(),
c.pop(),d};e.isEqual=function(a,f){return F(a,f,[],[])};e.isEmpty=function(a){if(null==a)return!0;if(e.isArray(a)||e.isString(a))return 0===a.length;for(var f in a)if(e.has(a,f))return!1;return!0};e.isElement=function(a){return!!a&&1===a.nodeType};e.isArray=c||function(a){return"[object Array]"==l.call(a)};e.isObject=function(a){return a===Object(a)};t("Arguments Function String Number Date RegExp".split(" "),function(a){e["is"+a]=function(f){return l.call(f)=="[object "+a+"]"}});e.isArguments(arguments)||
(e.isArguments=function(a){return!!a&&!!e.has(a,"callee")});"function"!=typeof/./&&(e.isFunction=function(a){return"function"==typeof a});e.isFinite=function(a){return e.isNumber(a)&&isFinite(a)};e.isNaN=function(a){return e.isNumber(a)&&a!=+a};e.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==l.call(a)};e.isNull=function(a){return null===a};e.isUndefined=function(a){return void 0===a};e.has=function(a,f){return i.call(a,f)};e.noConflict=function(){return d._=j,this};e.identity=function(a){return a};
e.times=function(a,f,b){for(var c=0;c<a;c++)f.call(b,c)};e.random=function(a,f){return null==f&&(f=a,a=0),a+(0|Math.random()*(f-a+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=e.invert(D.escape);var H={escape:RegExp("["+e.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+e.keys(D.unescape).join("|")+")","g")};e.each(["escape","unescape"],function(a){e[a]=function(f){return null==f?"":(""+f).replace(H[a],function(f){return D[a][f]})}});
e.result=function(a,f){if(null==a)return null;var b=a[f];return e.isFunction(b)?b.call(a):b};e.mixin=function(a){t(e.functions(a),function(f){var b=e[f]=a[f];e.prototype[f]=function(){var a=[this._wrapped];g.apply(a,arguments);a=b.apply(e,a);return this._chain?e(a).chain():a}})};var I=0;e.uniqueId=function(a){var f=I++;return a?a+f:f};e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t",
"\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;e.template=function(a,f,b){var b=e.defaults({},b,e.templateSettings),c=RegExp([(b.escape||G).source,(b.interpolate||G).source,(b.evaluate||G).source].join("|")+"|$","g"),k=0,g="__p+='";a.replace(c,function(f,b,c,e,d){g+=a.slice(k,d).replace(K,function(a){return"\\"+J[a]});g+=b?"'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'":c?"'+\n((__t=("+c+"))==null?'':__t)+\n'":e?"';\n"+e+"\n__p+='":"";k=d+f.length});g+="';\n";b.variable||(g=
"with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{var d=new Function(b.variable||"obj","_",g)}catch(x){throw x.source=g,x;}if(f)return d(f,e);f=function(a){return d.call(this,a,e)};return f.source="function("+(b.variable||"obj")+"){\n"+g+"}",f};e.chain=function(a){return e(a).chain()};e.mixin(e);t("pop push reverse shift sort splice unshift".split(" "),function(a){var f=b[a];e.prototype[a]=function(){var b=
this._wrapped;return f.apply(b,arguments),("shift"==a||"splice"==a)&&0===b.length&&delete b[0],this._chain?e(b).chain():b}});t(["concat","join","slice"],function(a){var f=b[a];e.prototype[a]=function(){var a=f.apply(this._wrapped,arguments);return this._chain?e(a).chain():a}});e.extend(e.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var d=this,j=d.Backbone,a=Array.prototype.slice,b=Array.prototype.splice,c;c="undefined"!==typeof exports?exports:d.Backbone={};c.VERSION="0.9.2";var g=d._;!g&&"undefined"!==typeof require&&(g=require("underscore"));var h=d.jQuery||d.Zepto||d.ender;c.setDomLibrary=function(a){h=a};c.noConflict=function(){d.Backbone=j;return this};c.emulateHTTP=!1;c.emulateJSON=!1;var p=/\s+/,l=c.Events={on:function(a,b,c){var g,e,d,h,n;if(!b)return this;a=a.split(p);for(g=this._callbacks||(this._callbacks=
{});e=a.shift();)d=(n=g[e])?n.tail:{},d.next=h={},d.context=c,d.callback=b,g[e]={tail:h,next:n?n.next:d};return this},off:function(a,b,c){var e,d,h,n,i,l;if(d=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(p):g.keys(d);e=a.shift();)if(h=d[e],delete d[e],h&&(b||c))for(n=h.tail;(h=h.next)!==n;)if(i=h.callback,l=h.context,b&&i!==b||c&&l!==c)this.on(e,i,l);return this}},trigger:function(f){var b,c,g,e,d,h;if(!(g=this._callbacks))return this;d=g.all;f=f.split(p);for(h=
a.call(arguments,1);b=f.shift();){if(c=g[b])for(e=c.tail;(c=c.next)!==e;)c.callback.apply(c.context||this,h);if(c=d){e=c.tail;for(b=[b].concat(h);(c=c.next)!==e;)c.callback.apply(c.context||this,b)}}return this}};l.bind=l.on;l.unbind=l.off;var i=c.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=z(this,"defaults"))a=g.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=g.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=g.clone(this.attributes);this.initialize.apply(this,arguments)};g.extend(i.prototype,l,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return g.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.get(a);return this._escapedAttributes[a]=g.escape(null==
b?"":""+b)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var e,d;g.isObject(a)||null==a?(e=a,c=b):(e={},e[a]=b);c||(c={});if(!e)return this;e instanceof i&&(e=e.attributes);if(c.unset)for(d in e)e[d]=void 0;if(!this._validate(e,c))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var b=c.changes={},h=this.attributes,n=this._escapedAttributes,p=this._previousAttributes||{};for(d in e){a=e[d];if(!g.isEqual(h[d],a)||c.unset&&g.has(h,d))delete n[d],(c.silent?this._silent:
b)[d]=!0;c.unset?delete h[d]:h[d]=a;!g.isEqual(p[d],a)||g.has(h,d)!=g.has(p,d)?(this.changed[d]=a,c.silent||(this._pending[d]=!0)):(delete this.changed[d],delete this._pending[d])}c.silent||this.change(c);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(g.clone(this.attributes),a)},fetch:function(a){var a=a?g.clone(a):{},b=this,e=a.success;a.success=function(c,d,g){if(!b.set(b.parse(c,g),a))return!1;e&&e(b,c)};
a.error=c.wrapError(a.error,b,a);return(this.sync||c.sync).call(this,"read",this,a)},save:function(a,b,e){var d,h;g.isObject(a)||null==a?(d=a,e=b):(d={},d[a]=b);e=e?g.clone(e):{};if(e.wait){if(!this._validate(d,e))return!1;h=g.clone(this.attributes)}a=g.extend({},e,{silent:!0});if(d&&!this.set(d,e.wait?a:e))return!1;var n=this,i=e.success;e.success=function(a,f,b){f=n.parse(a,b);e.wait&&(delete e.wait,f=g.extend(d||{},f));if(!n.set(f,e))return!1;i?i(n,a):n.trigger("sync",n,a,e)};e.error=c.wrapError(e.error,
n,e);b=this.isNew()?"create":"update";b=(this.sync||c.sync).call(this,b,this,e);e.wait&&this.set(h,a);return b},destroy:function(a){var a=a?g.clone(a):{},b=this,e=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(c){a.wait&&d();e?e(b,c):b.trigger("sync",b,c,a)};a.error=c.wrapError(a.error,b,a);var h=(this.sync||c.sync).call(this,"delete",this,a);a.wait||d();return h},url:function(){var a=z(this,"urlRoot")||z(this.collection,"url")||B();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var e=g.extend({},a.changes,this._silent);this._silent={};for(c in e)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!g.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=g.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!g.isEmpty(this.changed):g.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?g.clone(this.changed):!1;var b,c=!1,e=this._previousAttributes,d;for(d in a)if(!g.isEqual(e[d],b=a[d]))(c||(c={}))[d]=b;return c},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return g.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=g.extend({},this.attributes,a),c=this.validate(a,b);if(!c)return!0;b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}});var s=c.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};g.extend(s.prototype,l,{model:i,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,c){var e,d,h,n,i,p={},l={},j=[];c||(c={});a=g.isArray(a)?a.slice():[a];e=0;for(d=a.length;e<d;e++){if(!(h=a[e]=this._prepareModel(a[e],c)))throw Error("Can't add an invalid model to a collection");n=h.cid;i=h.id;p[n]||this._byCid[n]||null!=i&&(l[i]||this._byId[i])?
j.push(e):p[n]=l[i]=h}for(e=j.length;e--;)a.splice(j[e],1);e=0;for(d=a.length;e<d;e++)(h=a[e]).on("all",this._onModelEvent,this),this._byCid[h.cid]=h,null!=h.id&&(this._byId[h.id]=h);this.length+=d;b.apply(this.models,[null!=c.at?c.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(c.silent)return this;e=0;for(d=this.models.length;e<d;e++)if(p[(h=this.models[e]).cid])c.index=e,h.trigger("add",h,this,c);return this},remove:function(a,b){var c,e,d,h;b||(b={});a=g.isArray(a)?
a.slice():[a];c=0;for(e=a.length;c<e;c++)if(h=this.getByCid(a[c])||this.get(a[c]))delete this._byId[h.id],delete this._byCid[h.cid],d=this.indexOf(h),this.models.splice(d,1),this.length--,b.silent||(b.index=d,h.trigger("remove",h,this,b)),this._removeReference(h);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,g.extend({at:0},b));return a},
shift:function(a){var b=this.at(0);this.remove(b,a);return b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return g.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=g.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return g.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,e=this.models.length;c<e;c++)this._removeReference(this.models[c]);this._reset();this.add(a,g.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?g.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,e=a.success;a.success=function(c,
d,g){b[a.add?"add":"reset"](b.parse(c,g),a);e&&e(b,c)};a.error=c.wrapError(a.error,b,a);return(this.sync||c.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?g.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var e=b.success;b.success=function(d,g){b.wait&&c.add(d,b);e?e(d,g):d.trigger("sync",a,g,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return g(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,b){b||(b={});a instanceof i?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,
arguments))}});g.each("forEach each map reduce reduceRight find detect filter select reject every all some any include contains invoke max min sortBy sortedIndex toArray size first initial rest last without indexOf shuffle lastIndexOf isEmpty groupBy".split(" "),function(a){s.prototype[a]=function(){return g[a].apply(g,[this.models].concat(g.toArray(arguments)))}});var q=c.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},v=/:\w+/g,
n=/\*\w+/g,u=/[-[\]{}()+?.,\\^$|#\s]/g;g.extend(q.prototype,l,{initialize:function(){},route:function(a,b,e){c.history||(c.history=new y);g.isRegExp(a)||(a=this._routeToRegExp(a));e||(e=this[b]);c.history.route(a,g.bind(function(d){d=this._extractParameters(a,d);e&&e.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));c.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){c.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(u,"\\$&").replace(v,"([^/]+)").replace(n,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var y=c.History=function(){this.handlers=[];g.bindAll(this,"checkUrl")},w=/^[#\/]/,r=/msie [\w.]+/;y.started=!1;g.extend(y.prototype,l,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(w,"")},start:function(a){if(y.started)throw Error("Backbone.history has already been started");y.started=!0;this.options=g.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=r.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(w,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);y.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return g.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!y.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(w,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var C=c.View=function(a){this.cid=g.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},E=/^(\S+)\s*(.*)$/,A="model collection el id attributes className tagName".split(" ");
g.extend(C.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&h(a).attr(b);c&&h(a).html(c);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof h?a:h(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=z(this,"events"))){this.undelegateEvents();
for(var b in a){var c=a[b];g.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var e=b.match(E),d=e[1],e=e[2],c=g.bind(c,this),d=d+(".delegateEvents"+this.cid);""===e?this.$el.bind(d,c):this.$el.delegate(e,d,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=g.extend({},this.options,a));for(var b=0,c=A.length;b<c;b++){var e=A[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=z(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});i.extend=s.extend=q.extend=C.extend=function(a,b){var c=this,e;e=a&&a.hasOwnProperty("constructor")?a.constructor:function(){c.apply(this,arguments)};g.extend(e,c);t.prototype=c.prototype;e.prototype=new t;a&&g.extend(e.prototype,a);b&&g.extend(e,b);e.prototype.constructor=e;e.__super__=c.prototype;e.extend=this.extend;return e};var e={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(a,b,d){var n=e[a];d||(d={});var i={type:n,dataType:"json"};d.url||(i.url=z(b,"url")||B());if(!d.data&&b&&("create"==a||"update"==a))i.contentType="application/json",i.data=JSON.stringify(b.toJSON());c.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(c.emulateHTTP&&("PUT"===n||"DELETE"===n))c.emulateJSON&&(i.data._method=n),i.type="POST",i.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
n)};"GET"!==i.type&&!c.emulateJSON&&(i.processData=!1);return h.ajax(g.extend(i,d))};c.wrapError=function(a,b,c){return function(e,d){d=e===b?d:e;a?a(b,d,c):b.trigger("error",b,d,c)}};var t=function(){},z=function(a,b){return!a||!a[b]?null:g.isFunction(a[b])?a[b]():a[b]},B=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(){window.StackMob=this.StackMob={DEFAULT_API_VERSION:0,DEFAULT_LOGIN_SCHEMA:"user",DEFAULT_LOGIN_FIELD:"username",DEFAULT_PASSWORD_FIELD:"password",EARTH_RADIANS_MI:3956.6,EARTH_RADIANS_KM:6367.5,FORCE_CREATE_REQUEST:"stackmob_force_create_request",ARRAY_FIELDNAME:"stackmob_array_fieldname",ARRAY_VALUES:"stackmob_array_values",CASCADE_DELETE:"stackmob_cascade_delete",HARD_DELETE:!0,SOFT_DELETE:!1,API_SERVER:"api.stackmob.com",RETRY_WAIT:1E4,RETRY_ATTEMPTS:3,REFRESH_TOKEN_KEY:"oauth2.refreshToken",
POST:"POST",PUT:"PUT",DELETE:"DELETE",CONTENT_TYPE_JSON:"application/json",apiVersion:0,sdkVersion:"0.8.0",publicKey:null,Storage:{STORAGE_PREFIX:"stackmob.",persist:function(d,j){localStorage&&localStorage.setItem(this.STORAGE_PREFIX+d,j)},retrieve:function(d){return localStorage?localStorage.getItem(this.STORAGE_PREFIX+d):null},remove:function(d){localStorage&&localStorage.removeItem(this.STORAGE_PREFIX+d)}},_generateCallbacks:function(d,j){d.success=function(a){j.isValidResult(a)?"function"===
typeof j.yes&&j.yes(a):"function"===typeof j.no&&j.no(a)};!d.error&&"function"===typeof j.error&&(d.error=j.error);return d},_containsCallbacks:function(d,j){return"object"===typeof d&&_.some(j,function(a){return"function"===typeof d[a]})},getLoggedInUser:function(d){var j=!this.isOAuth2Mode()&&this.Storage.retrieve(this.loggedInUserKey)||this.Storage.retrieve("oauth2.user");if(d&&d.success)this.hasValidOAuth(d);else return this.isLoggedIn(d)&&j?j:null},isLoggedIn:function(d){if(this._containsCallbacks(d,
["yes","no"]))d=this._generateCallbacks(d,{isValidResult:function(d){return"undefined"!==typeof d},yes:d.yes,no:d.no,error:d.no}),this.hasValidOAuth(d);else return!this.isLoggedOut()||this.hasValidOAuth(d)},isUserLoggedIn:function(d,j){if(this._containsCallbacks(j,["yes","no"]))j=this._generateCallbacks(j,{isValidResult:function(a){return a==d},yes:j.yes,no:j.no,error:j.no}),this.hasValidOAuth(j);else return d==this.getLoggedInUser(j)},isLoggedOut:function(d){if(this._containsCallbacks(d,["yes","no"]))d=
this._generateCallbacks(d,{isValidResult:function(d){return"undefined"==typeof d},yes:d.yes,no:d.no,error:d.yes}),this.hasValidOAuth(d);else return!this.hasValidOAuth(d)},getScheme:function(){return!0===this.secure?"https":"http"},getBaseURL:function(){return StackMob.useRelativePathForAjax?StackMob.apiURL||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/":StackMob.apiURL||this.getScheme()+"://"+StackMob.API_SERVER+"/"},throwError:function(d){throw Error(d);
},urlError:function(){this.throwError('A "url" property or function must be specified')},requirePublicKey:function(){StackMob.publicKey||this.throwError("Error: This requires that you initialize StackMob with a public key.")},isOAuth2Mode:function(){return!isNaN(StackMob.publicKey&&!StackMob.privateKey)},prepareCredsForSaving:function(d,j,a,b,c){b=(new Date).getTime()+1E3*b;d={"oauth2.accessToken":d,"oauth2.macKey":a,"oauth2.expires":b,"oauth2.user":c};d[StackMob.REFRESH_TOKEN_KEY]=j;return d},saveOAuthCredentials:function(d){var j=
d["oauth2.accessToken"],a=d[StackMob.REFRESH_TOKEN_KEY];this.Storage.retrieve("oauth2.accessToken")!=j&&this.Storage.persist("oauth2.expires",d["oauth2.expires"]);this.Storage.persist("oauth2.accessToken",j);this.Storage.persist(StackMob.REFRESH_TOKEN_KEY,a);this.Storage.persist("oauth2.macKey",d["oauth2.macKey"]);this.Storage.persist("oauth2.user",d["oauth2.user"])},hasValidOAuth:function(d){if(!this.isOAuth2Mode())return d&&d.error&&d.error(),!1;var j=this.getOAuthCredentials();if(!_.all([j["oauth2.accessToken"],
j["oauth2.macKey"],j["oauth2.expires"]||0],_.identity))return d&&d.success&&d.success(void 0),!1;if(StackMob.hasExpiredOAuth())if(d&&d.success){var a=d.success;d.success=function(b){a(b[StackMob.loginField])};StackMob.refreshSession.call(StackMob,d)}else return!1;else return d&&d.success&&d.success(this.Storage.retrieve("oauth2.user")),this.Storage.retrieve("oauth2.user")},shouldSendRefreshToken:function(){return this.hasExpiredOAuth()&&this.hasRefreshToken()&&this.shouldKeepLoggedIn()},keepLoggedIn:function(d){StackMob.Storage.persist("oauth2.shouldKeepLoggedIn",
!0===d)},shouldKeepLoggedIn:function(){return"true"===StackMob.Storage.retrieve("oauth2.shouldKeepLoggedIn")},hasRefreshToken:function(){var d=this.getOAuthCredentials();return d&&"undefined"!==typeof d[StackMob.REFRESH_TOKEN_KEY]&&null!=d[StackMob.REFRESH_TOKEN_KEY]},getRefreshToken:function(){return this.getOAuthCredentials()[StackMob.REFRESH_TOKEN_KEY]},hasExpiredOAuth:function(){return this.isOAuth2Mode()&&null==this.getOAuthExpireTime()||this.getOAuthExpireTime()<=(new Date).getTime()},getOAuthCredentials:function(){var d=
StackMob.Storage.retrieve("oauth2.accessToken"),j=StackMob.Storage.retrieve("oauth2.macKey"),a=StackMob.Storage.retrieve("oauth2.expires"),b=StackMob.Storage.retrieve(StackMob.REFRESH_TOKEN_KEY),d={"oauth2.accessToken":d,"oauth2.macKey":j,"oauth2.expires":a};d[StackMob.REFRESH_TOKEN_KEY]=b;return d},getOAuthExpireTime:function(){var d=this.Storage.retrieve("oauth2.expires");return d?parseInt(d):null},METHOD_MAP:{create:"POST",read:"GET",update:"PUT","delete":"DELETE",post:"POST",get:"GET",put:"PUT",
addRelationship:"POST",appendAndSave:"PUT",deleteAndSave:"DELETE",login:"GET",accessToken:"POST",refreshToken:"POST",logout:"GET",forgotPassword:"POST",loginWithTempAndSetNewPassword:"GET",resetPassword:"POST",facebookAccessToken:"POST",createUserWithFacebook:"POST",linkUserWithFacebook:"POST"},getProperty:function(d,j){return!d||!d[j]?null:_.isFunction(d[j])?d[j]():d[j]},init:function(d){d=d||{};this.initStart(d);this.userSchema=d.userSchema||this.DEFAULT_LOGIN_SCHEMA;this.loginField=d.loginField||
this.DEFAULT_LOGIN_FIELD;this.passwordField=d.passwordField||this.DEFAULT_PASSWORD_FIELD;this.newPasswordField=d.newPasswordField||"new_password";this.apiVersion=d.apiVersion||this.DEFAULT_API_VERSION;this.appName=this.getProperty(d,"appName")||this.throwError("An appName must be specified");this.clientSubdomain=this.getProperty(d,"clientSubdomain");this.publicKey=d.publicKey;this.apiURL=d.apiURL;var j=0<window.location.hostname.indexOf(".stackmobapp.com");this.useRelativePathForAjax=d.useRelativePathForAjax||
j;this.oauth2targetdomain=d.oauth2targetdomain||this.oauth2targetdomain||"www.stackmob.com";this.secure=!0===d.secure;this.fullURL=!0===d.fullURL||"undefined"!==typeof PhoneGap||this.fullURL;this.ajax=d.ajax||this.ajax;this.urlRoot=d.urlRoot||this.getBaseURL();this.initEnd(d);return this},initStart:function(){},initEnd:function(){}}}).call(this);
(function(){function d(a,b){var c=StackMob.getBaseURL(),d=b.url.replace(RegExp(c,"g"),"/"),h=c.replace(RegExp("^http://|^https://","g"),"").replace(/\//,""),p=StackMob.Storage.retrieve("oauth2.accessToken"),l=StackMob.Storage.retrieve("oauth2.macKey");StackMob.Storage.retrieve("oauth2.expires");if(StackMob.isOAuth2Mode()&&p&&l){var i=b.type,j=h.split(":"),h=1<j.length?j[0]:h,q=1<j.length?j[1]:"https"==c.substring(0,5)?443:80,c=Math.round((new Date).getTime()/1E3),j="n"+Math.round(1E4*Math.random()),
d=CryptoJS.HmacSHA1(c+"\n"+j+"\n"+i+"\n"+d+"\n"+h+"\n"+q+"\n\n",l).toString(CryptoJS.enc.Base64);return'MAC id="'+p+'",ts="'+c+'",nonce="'+j+'",mac="'+d+'"'}}var j=this;_.extend(StackMob,{isSencha:function(){return j.Ext},isZepto:function(){return j.Zepto},initEnd:function(){StackMob.Model=Backbone.Model.extend({urlRoot:StackMob.urlRoot,url:function(){var a=StackMob.urlRoot||StackMob.urlError();return a+=this.schemaName},getPrimaryKeyField:function(){return this.schemaName+"_id"},constructor:function(){this.setIDAttribute();
Backbone.Model.prototype.constructor.apply(this,arguments)},initialize:function(){StackMob.getProperty(this,"schemaName")||StackMob.throwError("A schemaName must be defined");this.setIDAttribute()},setIDAttribute:function(){this.idAttribute=this.getPrimaryKeyField()},parse:function(a){return!a||a&&(!a.text||""==a.text)?a:JSON.parse(a.text)},sync:function(a,b,c){StackMob.sync.call(this,a,this,c)},create:function(a){var b={};b[StackMob.FORCE_CREATE_REQUEST]=!0;_.extend(b,a);this.save(null,b)},query:function(a,
b){b=b||{};_.extend(b,{query:a});this.fetch(b)},save:function(a,b){var c=a?a.success:{},d=a?a.error:{};"undefined"===typeof b&&(_.isFunction(c)||_.isFunction(d))?Backbone.Model.prototype.save.call(this,null,a):Backbone.Model.prototype.save.call(this,a,b)},fetchExpanded:function(a,b){(0>a||3<a)&&StackMob.throwError("Depth must be between 0 and 3 inclusive.");var c={};_.extend(c,b);c.data=c.data||{};c.data._expand=a;this.fetch(c)},getAsModel:function(a,b){var c=this.get(a);return c?_.isArray(c)?_.map(c,
function(a){return new b(a)}):new b(c):{}},appendAndCreate:function(a,b,c){this.addRelationship(a,b,c)},addRelationship:function(a,b,c){c=c||{};c[StackMob.ARRAY_FIELDNAME]=a;c[StackMob.ARRAY_VALUES]=b;StackMob.sync.call(this,"addRelationship",this,c)},appendAndSave:function(a,b,c){c=c||{};c[StackMob.ARRAY_FIELDNAME]=a;c[StackMob.ARRAY_VALUES]=b;StackMob.sync.call(this,"appendAndSave",this,c)},deleteAndSave:function(a,b,c,d){d=d||{};d[StackMob.ARRAY_FIELDNAME]=a;d[StackMob.ARRAY_VALUES]=b;d[StackMob.CASCADE_DELETE]=
c;var h=this;d.stackmob_ondeleteAndSave=function(){var c=h.get(a);h.set(a,_.difference(c,b))};StackMob.sync.call(this,"deleteAndSave",this,d)},setBinaryFile:function(a,b,c,d){this.set(a,"Content-Type: "+c+"\nContent-Disposition: attachment; filename="+b+"\nContent-Transfer-Encoding: base64\n\n"+d)},incrementOnSave:function(a,b){this.attributes[this.idAttribute]?(this.attributes[a]&&delete this.attributes[a],this.set(a+"[inc]",b)):StackMob.throwError("Please specify an id for the row you wish to update. When creating a new instance of your object, you need to pass in JSON that includes the id field and value (e.g. var user = new StackMob.User({ username: 'chucknorris' });)  Or, for custom objects: var todoInstance = new Todo({todo_id : '1234'})")},
decrementOnSave:function(a,b){this.incrementOnSave(a,-1*b)}});StackMob.Collection=Backbone.Collection.extend({initialize:function(){this.model||StackMob.throwError("Please specify a StackMob.Model for this collection. e.g., var Items = StackMob.Collection.extend({ model: Item });");this.schemaName=(new this.model).schemaName},url:function(){var a=StackMob.urlRoot||StackMob.urlError();return a+=this.schemaName},parse:function(a){return!a||a&&(!a.text||""==a.text)?a:JSON.parse(a.text)},sync:function(a,
b,c){StackMob.sync.call(this,a,this,c)},query:function(a,b){b=b||{};_.extend(b,{query:a});this.fetch(b)},create:function(a,b){var c={};c[StackMob.FORCE_CREATE_REQUEST]=!0;_.extend(c,b);Backbone.Collection.prototype.create.call(this,a,c)},count:function(a,b){a=a||new StackMob.Collection.Query;b=b||{};b.stackmob_count=!0;var c=b.success;b.success=function(a){if(a&&a.getAllResponseHeaders){var b=a.getResponseHeader("Content-Range"),d=0;b&&(d=b.substring(b.indexOf("/")+1,b.length));if(0===d)try{d=JSON.parse(a.responseText).length}catch(l){}c&&
c(d)}else c(a)};a.setRange&&(b.query=a.setRange(0,0));return(this.sync||Backbone.sync).call(this,"query",this,b)}});StackMob.User=StackMob.Model.extend({idAttribute:StackMob.loginField,schemaName:StackMob.userSchema,getPrimaryKeyField:function(){return StackMob.loginField},isLoggedIn:function(a){if(StackMob._containsCallbacks(a,["yes","no"]))a=StackMob._generateCallbacks(a,{isValidResult:function(a){return"undefined"!==typeof a},yes:a.yes,no:a.no,error:a.no}),StackMob.hasValidOAuth(a);else return StackMob.isUserLoggedIn(this.get(StackMob.loginField),
a)},login:function(a,b){b=b||{};StackMob.keepLoggedIn("undefined"===typeof a?!1:a);b.data=b.data||{};b.data[StackMob.loginField]=this.get(StackMob.loginField);b.data[StackMob.passwordField]=this.get(StackMob.passwordField);StackMob.isOAuth2Mode()&&(b.data.token_type="mac");b.stackmob_onaccessToken=StackMob.processLogin;(this.sync||Backbone.sync).call(this,StackMob.isOAuth2Mode()?"accessToken":"login",this,b)},logout:function(a){a=a||{};a.data=a.data||{};a.stackmob_onlogout=function(){StackMob.Storage.remove(StackMob.loggedInUserKey);
StackMob.Storage.remove("oauth2.accessToken");StackMob.Storage.remove(StackMob.REFRESH_TOKEN_KEY);StackMob.Storage.remove("oauth2.macKey");StackMob.Storage.remove("oauth2.expires");StackMob.Storage.remove("oauth2.user")};(this.sync||Backbone.sync).call(this,"logout",this,a)},loginWithFacebookToken:function(a,b,c){c=c||{};c.data=c.data||{};_.extend(c.data,{fb_at:a,token_type:"mac"});c.stackmob_onfacebookAccessToken=StackMob.processLogin;(this.sync||Backbone.sync).call(this,"facebookAccessToken",this,
c)},createUserWithFacebook:function(a,b){b=b||{};b.data=b.data||{};_.extend(b.data,{fb_at:a,token_type:"mac"});b.data[StackMob.loginField]=b[StackMob.loginField]||this.get(StackMob.loginField);(this.sync||Backbone.sync).call(this,"createUserWithFacebook",this,b)},linkUserWithFacebook:function(a,b){b=b||{};b.data=b.data||{};_.extend(b.data,{fb_at:a,token_type:"mac"});(this.sync||Backbone.sync).call(this,"linkUserWithFacebook",this,b)},loginWithTempAndSetNewPassword:function(a,b,c,d){d=d||{};d.data=
d.data||{};var h={};h[StackMob.passwordField]=a;this.set(h);d.data[StackMob.newPasswordField]=b;this.login(c,d)},forgotPassword:function(a){a=a||{};a.data=a.data||{};a.data[StackMob.loginField]=this.get(StackMob.loginField);(this.sync||Backbone.sync).call(this,"forgotPassword",this,a)},resetPassword:function(a,b,c){c=c||{};c.data=c.data||{};c.data.old={password:a};c.data["new"]={password:b};(this.sync||Backbone.sync).call(this,"resetPassword",this,c)}});StackMob.Users=StackMob.Collection.extend({model:StackMob.User});
StackMob.GeoPoint=function(a,b){_.isNumber(a)?((-90>a||90<a)&&StackMob.throwError("Latitude value must be between -90 and 90 inclusive."),(-180>b||180<b)&&StackMob.throwError("Longitude value must be between -180 and 180 inclusive."),this.lat=a,this.lon=b):((-90>a.lat||90<a.lat)&&StackMob.throwError("Latitude value must be between -90 and 90 inclusive."),(-180>a.lon||180<a.lon)&&StackMob.throwError("Longitude value must be between -180 and 180 inclusive."),this.lat=a.lat,this.lon=a.lon)};StackMob.GeoPoint.prototype.toJSON=
function(){return{lat:this.lat,lon:this.lon}};StackMob.Model.Query=function(){this.selectFields=[];this.params={}};_.extend(StackMob.Model.Query.prototype,{select:function(a){this.selectFields.push(a);return this},setExpand:function(a){this.params._expand=a;return this}});StackMob.Collection.Query=function(){this.params={};this.selectFields=[];this.orderBy=[];this.range=null};StackMob.Collection.Query.prototype=new StackMob.Model.Query;StackMob.Collection.Query.prototype.constructor=StackMob.Collection.Query;
_.extend(StackMob.Collection.Query.prototype,{addParam:function(a,b){this.params[a]=b;return this},equals:function(a,b){this.params[a]=b;return this},lt:function(a,b){this.params[a+"[lt]"]=b;return this},lte:function(a,b){this.params[a+"[lte]"]=b;return this},gt:function(a,b){this.params[a+"[gt]"]=b;return this},gte:function(a,b){this.params[a+"[gte]"]=b;return this},notEquals:function(a,b){this.params[a+"[ne]"]=b;return this},isNull:function(a){this.params[a+"[null]"]=!0;return this},isNotNull:function(a){this.params[a+
"[null]"]=!1;return this},mustBeOneOf:function(a,b){var c="";if(_.isArray(b))for(var d=b.length,h=0;h<d;h++)c+=b[h],h+1<d&&(c+=",");else c=b;this.params[a+"[in]"]=c;return this},orderAsc:function(a){this.orderBy.push(a+":asc");return this},orderDesc:function(a){this.orderBy.push(a+":desc");return this},setRange:function(a,b){this.range={start:a,end:b};return this},mustBeNear:function(a,b,c){this.params[a+"[near]"]=b.lat+","+b.lon+","+c;return this},mustBeNearMi:function(a,b,c){this.mustBeNear(a,b,
c/StackMob.EARTH_RADIANS_MI);return this},mustBeNearKm:function(a,b,c){this.mustBeNear(a,b,c/StackMob.EARTH_RADIANS_KM);return this},isWithin:function(a,b,c){this.params[a+"[within]"]=b.lat+","+b.lon+","+c;return this},isWithinMi:function(a,b,c){this.isWithin(a,b,c/StackMob.EARTH_RADIANS_MI);return this},isWithinKm:function(a,b,c){this.isWithin(a,b,c/StackMob.EARTH_RADIANS_KM);return this},isWithinBox:function(a,b,c){this.params[a+"[within]"]=b.lat+","+b.lon+","+c.lat+","+c.lon;return this}})},cc:function(a,
b,c,d){this.customcode(a,b,c,d)},customcode:function(a,b,c,d){_.isObject(c)?(d=c||{},c=(c=d.httpVerb)&&!_.isUndefined(StackMob.METHOD_MAP[c.toLowerCase()])?c:"GET",d.httpVerb=c):(d=d||{},_.isString(c)&&(c&&!_.isUndefined(StackMob.METHOD_MAP[c.toLowerCase()]))&&(d.httpVerb=c.toUpperCase()));d.data=d.data||{};"GET"!==c&&(d.contentType=d.contentType||StackMob.CONTENT_TYPE_JSON);_.extend(d.data,b);d.url=this.getBaseURL();this.sync.call(StackMob,a,null,d)},processLogin:function(a){if(StackMob.isOAuth2Mode()){var b=
a.access_token,c=a.refresh_token,d=a.mac_key,h=a.expires_in,p=null;try{var p=a.stackmob.user[StackMob.loginField],l=StackMob.prepareCredsForSaving(b,c,d,h,p);StackMob.saveOAuthCredentials(l);StackMob.Storage.persist(StackMob.loggedInUserKey,p)}catch(i){console&&console.error("Problem saving OAuth 2.0 credentials and user")}}},getCallId:function(a,b){var c={method:a,model:b||{},time:(new Date).getTime()};return JSON.stringify(c)},sync:function(a,b,c){c=c||{};if(!StackMob.isAccessTokenMethod(a)&&StackMob.shouldSendRefreshToken()&&
!0!==c.stackmob_attempted_refresh){var g=a,h=c;h.stackmob_attempted_refresh=!0;var p=this;StackMob.refreshSession.call(StackMob,{oncomplete:function(){StackMob.sync.call(p,g,b,h)}});return!1}var l=!0===c[StackMob.FORCE_CREATE_REQUEST];l&&(a="create");var i=_.extend({type:c.httpVerb||StackMob.METHOD_MAP[a]||"GET",dataType:"json"},c);i.data=i.data||{};!i.url&&b&&(i.url=StackMob.getProperty(b,"url"));var j="cc"!=a,q=b&&b.isNew&&!b.isNew(),l=!l,v="addRelationship"==a||"appendAndSave"==a||"deleteAndSave"==
a;if(_.include("create update delete read query deleteAndSave appendAndSave addRelationship".split(" "),a)){if(v||j&&q&&l)i.url+=("/"==i.url.charAt(i.url.length-1)?"":"/")+encodeURIComponent(b.get(b.getPrimaryKeyField())),v&&(i.url+="/"+c[StackMob.ARRAY_FIELDNAME]),"deleteAndSave"==a&&(j="",j=_.isArray(c[StackMob.ARRAY_VALUES])?_.map(c[StackMob.ARRAY_VALUES],function(a){return encodeURIComponent(a)}).join(","):encodeURIComponent(c[StackMob.ARRAY_VALUES]),i.url+="/"+j)}else i.url+=("/"==i.url.charAt(i.url.length-
1)?"":"/")+a;j=c;i.headers=i.headers||{};i.headers=_.extend({Accept:"application/vnd.stackmob+json; version="+StackMob.apiVersion},i.headers);_.extend(i.headers,{"X-StackMob-User-Agent":"StackMob (JS; "+StackMob.sdkVersion+")"});StackMob.publicKey&&!StackMob.privateKey?(i.headers["X-StackMob-API-Key"]=StackMob.publicKey,i.headers["X-StackMob-Proxy-Plain"]="stackmob-api",i.headers["X-StackMob-API-Key-"+StackMob.publicKey]=""):i.headers["X-StackMob-Proxy"]="stackmob-api";StackMob.isOAuth2Mode()&&StackMob.isAccessTokenMethod(a)?
i.contentType="application/x-www-form-urlencoded":_.include(["PUT","POST"],StackMob.METHOD_MAP[a])&&(i.contentType=i.contentType||StackMob.CONTENT_TYPE_JSON);isNaN(j[StackMob.CASCADE_DELETE])||(i.headers["X-StackMob-CascadeDelete"]=!0==j[StackMob.CASCADE_DELETE]);if(j.query&&(j=i.query||throwError("No StackMobQuery object provided to the query call."),j.selectFields&&0<j.selectFields.length&&(i.headers["X-StackMob-Select"]=j.selectFields.join()),j.range&&(i.headers.Range="objects="+j.range.start+
"-"+j.range.end),_.extend(i.data,j.params),j.orderBy&&0<j.orderBy.length)){j=j.orderBy;q="";l=j.length;for(v=0;v<l;v++)q+=j[v],v+1<l&&(q+=",");i.headers["X-StackMob-OrderBy"]=q}j=a;q=function(a){return _.map(_.keys(a),function(b){return b+"="+encodeURIComponent(a[b])}).join("&")};c=c||{};if(StackMob.isOAuth2Mode()&&StackMob.isAccessTokenMethod(j))i.data=q(i.data);else if("POST"==i.type||"PUT"==i.type)if("resetPassword"==j||"forgotPassword"==j)i.data=JSON.stringify(i.data);else if("addRelationship"==
j||"appendAndSave"==j)c&&c[StackMob.ARRAY_VALUES]&&(i.data=JSON.stringify(c[StackMob.ARRAY_VALUES]));else if(b){var n=b.toJSON();_.each(c.remote_ignore||[],function(a){delete n[a]});delete n.lastmoddate;delete n.createddate;"update"==j&&delete n[StackMob.passwordField];StackMob.isOAuth2Mode()&&delete n.sm_owner;i.data=JSON.stringify(_.extend(n,i.data))}else i.data=JSON.stringify(i.data);else"GET"==i.type&&!_.isEmpty(i.data)&&(i.url+="?",c=q(i.data),i.url+=c),delete i.data;c=i||{};c.processData=!1;
c.accepts=c.headers.Accept;StackMob.isAccessTokenMethod(a)||(c=a,StackMob.isAccessTokenMethod(c)||(c=d(c,i))&&(i.headers.Authorization=c));StackMob.makeAPICall(b,i,a)},refreshSession:function(a){var b={};_.extend(b,a);if(StackMob.hasRefreshToken()){b.url="/"+StackMob.userSchema;b.contentType="application/x-www-form-urlencoded";b.data={refresh_token:StackMob.getOAuthCredentials()[StackMob.REFRESH_TOKEN_KEY],grant_type:"refresh_token",token_type:"mac",mac_algorithm:"hmac-sha1"};var c=a.oncomplete;c&&
(b.oncomplete=function(){c()});a&&a.success&&(b.success=a.success);b.stackmob_onrefreshToken=StackMob.processLogin;b.error=function(){a&&a.error&&a.error();StackMob.Storage.remove(StackMob.REFRESH_TOKEN_KEY)};(this.sync||Backbone.sync).call(this,"refreshToken",this,b)}else a&&a.error&&a.error()},makeAPICall:function(a,b,c){return StackMob.ajax?StackMob.ajax(a,b,c):StackMob.isSencha()?StackMob.ajaxOptions.sencha(a,b,c):StackMob.isZepto()?StackMob.ajaxOptions.zepto(a,b,c):StackMob.ajaxOptions.jquery(a,
b,c)},onsuccess:function(a,b,c,d,h){if(c){if(_.isFunction(c["stackmob_on"+b]))c["stackmob_on"+b](d);if(_.isFunction(c.oncomplete))c.oncomplete(d)}h&&(d?(StackMob.isOAuth2Mode()&&(StackMob.isAccessTokenMethod(b)&&d.stackmob)&&(d=d.stackmob.user),h(d)):h())},onerror:function(a,b,c,g,h,j){var l=a.status,i;try{i=JSON.parse(b)}catch(s){i={error:"Invalid JSON returned."}}if(503==l){a=a.getResponseHeader("retry-after");try{a=1E3*parseInt(responseHeaderValue)}catch(q){a=StackMob.RETRY_WAIT}if("number"===
typeof h.stackmob_retry){if(h.stackmob_retry-=1,0>=h.stackmob_retry)return}else h.stackmob_retry=StackMob.RETRY_ATTEMPTS;_.delay(function(){var a=d(g,h);h.headers.Authorization=a;c(h)},a)}else{if(_.isFunction(h.oncomplete))h.oncomplete(i);j&&j(g,i)}},isAccessTokenMethod:function(a){return _.include(["accessToken","facebookAccessToken","refreshToken"],a)}})}).call(this);
(function(){var d=this.jQuery||this.Ext||this.Zepto;_.extend(StackMob,{ajaxOptions:{sencha:function(j,a,b){var c={},g=a.success;a.success=function(c){var d=c&&c.responseText?JSON.parse(c.responseText):null;!0===a.stackmob_count&&(d=c);StackMob.onsuccess(j,b,a,d,g)};var h=a.error;c.url=a.url;c.headers=a.headers;c.params=a.data;c.success=a.success;c.disableCaching=!1;c.method=a.type;a.error=function(a){StackMob.onerror(a,a.responseText||a.text,d.Ajax.request,j,c,h)};c.failure=a.error;return d.Ajax.request(c)},
zepto:function(j,a,b){var c=a.success,g=function(d,h){h=d?JSON.parse(d):null;StackMob.onsuccess(j,b,a,h,c)};a.success=g;var h=a.error,p=function(b){StackMob.onerror(b,b.responseText||b.text,d.ajax,j,a,h)};a.error=p;var l={};l.url=a.url;l.headers=a.headers;l.contentType=a.headers.contentType;l.type=a.type;l.data=a.data;l.success=g;l.error=p;return d.ajax(l)},jquery:function(j,a,b){a.beforeSend=function(a,b){a.setRequestHeader("Accept",b.accepts);if(!_.isEmpty(b.headers))for(key in b.headers)a.setRequestHeader(key,
b.headers[key])};var c=a.error;a.error=function(b,g,l){if(0==b.status&&a.query&&"object"===typeof a.query.range)this.success(b,g,l);else StackMob.onerror(b,b.responseText||b.text,d.ajax,j,a,c)};var g=a.success;a.success=function(c,d,j){var i;!0===a.stackmob_count?i=j:c&&c.toJSON?i=c:c&&(c.responseText||c.text)?i=JSON.parse(c.responseText||c.text):c&&(i=c);StackMob.onsuccess(c,b,a,i,g)};return d.ajax(a)}}})}).call(this);
var CryptoJS=CryptoJS||function(d,j){var a={},b=a.lib={},c=function(){},g=b.Base={extend:function(a){c.prototype=this;var b=new c;a&&b.mixIn(a);b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}},h=b.WordArray=g.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=
b!=j?b:4*a.length},toString:function(a){return(a||l).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,a=a.sigBytes;this.clamp();if(d%4)for(var g=0;g<a;g++)b[d+g>>>2]|=(c[g>>>2]>>>24-8*(g%4)&255)<<24-8*((d+g)%4);else if(65535<c.length)for(g=0;g<a;g+=4)b[d+g>>>2]=c[g>>>2];else b.push.apply(b,c);this.sigBytes+=a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-8*(b%4);a.length=d.ceil(b/4)},clone:function(){var a=g.clone.call(this);
a.words=this.words.slice(0);return a},random:function(a){for(var b=[],c=0;c<a;c+=4)b.push(4294967296*d.random()|0);return h.create(b,a)}}),p=a.enc={},l=p.Hex={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;d<a;d++){var g=b[d>>>2]>>>24-8*(d%4)&255;c.push((g>>>4).toString(16));c.push((g&15).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return h.create(c,b/2)}},i=p.Latin1={stringify:function(a){for(var b=
a.words,a=a.sigBytes,c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);return h.create(c,b)}},s=p.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},q=b.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=h.create();
this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=s.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,c=b.words,g=b.sigBytes,i=this.blockSize,j=g/(4*i),j=a?d.ceil(j):d.max((j|0)-this._minBufferSize,0),a=j*i,g=d.min(4*a,g);if(a){for(var l=0;l<a;l+=i)this._doProcessBlock(c,l);l=c.splice(0,a);b.sigBytes-=g}return h.create(l,g)},clone:function(){var a=g.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});b.Hasher=q.extend({init:function(){this.reset()},
reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);this._doFinalize();return this._hash},clone:function(){var a=q.clone.call(this);a._hash=this._hash.clone();return a},blockSize:16,_createHelper:function(a){return function(b,c){return a.create(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return v.HMAC.create(a,c).finalize(b)}}});var v=a.algo={};return a}(Math);
(function(){var d=CryptoJS,j=d.lib,a=j.WordArray,j=j.Hasher,b=[],c=d.algo.SHA1=j.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,c){for(var d=this._hash.words,j=d[0],i=d[1],s=d[2],q=d[3],v=d[4],n=0;80>n;n++){if(16>n)b[n]=a[c+n]|0;else{var u=b[n-3]^b[n-8]^b[n-14]^b[n-16];b[n]=u<<1|u>>>31}u=(j<<5|j>>>27)+v+b[n];u=20>n?u+((i&s|~i&q)+1518500249):40>n?u+((i^s^q)+1859775393):60>n?u+((i&s|i&q|s&q)-1894007588):u+((i^s^q)-
899497514);v=q;q=s;s=i<<30|i>>>2;i=j;j=u}d[0]=d[0]+j|0;d[1]=d[1]+i|0;d[2]=d[2]+s|0;d[3]=d[3]+q|0;d[4]=d[4]+v|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32;b[(d+64>>>9<<4)+15]=c;a.sigBytes=4*b.length;this._process()}});d.SHA1=j._createHelper(c);d.HmacSHA1=j._createHmacHelper(c)})();
(function(){var d=CryptoJS,j=d.enc.Utf8;d.algo.HMAC=d.lib.Base.extend({init:function(a,b){a=this._hasher=a.create();"string"==typeof b&&(b=j.parse(b));var c=a.blockSize,d=4*c;b.sigBytes>d&&(b=a.finalize(b));for(var h=this._oKey=b.clone(),p=this._iKey=b.clone(),l=h.words,i=p.words,s=0;s<c;s++)l[s]^=1549556828,i[s]^=909522486;h.sigBytes=p.sigBytes=d;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=
this._hasher,a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();
(function(){var d=CryptoJS,j=d.lib.WordArray;d.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var a=[],h=0;h<c;h+=3)for(var j=(b[h>>>2]>>>24-8*(h%4)&255)<<16|(b[h+1>>>2]>>>24-8*((h+1)%4)&255)<<8|b[h+2>>>2]>>>24-8*((h+2)%4)&255,l=0;4>l&&h+0.75*l<c;l++)a.push(d.charAt(j>>>6*(3-l)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var a=a.replace(/\s/g,""),b=a.length,c=this._map,d=c.charAt(64);d&&(d=a.indexOf(d),-1!=d&&(b=d));
for(var d=[],h=0,p=0;p<b;p++)if(p%4){var l=c.indexOf(a.charAt(p-1))<<2*(p%4),i=c.indexOf(a.charAt(p))>>>6-2*(p%4);d[h>>>2]|=(l|i)<<24-8*(h%4);h++}return j.create(d,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
